#excute given file
#param: @filename the file that will be execute.
#no return value
execfile() {
  currentdir="$(pwd)"
  pkg=""
  currentpkg=""
  #echo $1
  while [ -e __init__.py ]; do
    currentpkg=`basename -a "$(pwd)"`
    pkg="$currentpkg//$pkg"
    cd ..
  done

  py.test -v "$pkg" && cd "$currentdir"
}
#save current directory
cdir="$(pwd)"
#get execute file name
fn="$(basename -a "$0")"
#get directory by cutting off trailing filename
dir="$(echo "$0" | sed -e "s/$fn//g")"
#go to destination directory 
cd "$dir"
#run the file
execfile 
#go back working directory
cd "$cdir"
